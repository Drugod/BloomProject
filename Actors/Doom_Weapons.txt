ACTOR --------COMMON_ATTRIBUTES_DOOM------------ {}
ACTOR DoomW : Weapon
{
	+INVENTORY.RESTRICTABSOLUTELY
	Inventory.RestrictedTo "DoomDude"
	VisibleToPlayerClass "DoomDude"
}

ACTOR --------FIST------------ {}
ACTOR Fist_ : DoomW replaces Fist
{
	Weapon.SelectionOrder 3700
	Weapon.Kickback 100
	Obituary "$OB_MPFIST"
	Tag "$TAG_FIST"
	+WEAPON.WIMPY_WEAPON
	+WEAPON.MELEEWEAPON
	DamageType "Pitchfork"
	AttackSound "doomdude/punch"
	States
	{
	Ready:
		PUNG A 1 A_WeaponReady
		TNT1 A 0 A_JumpIfInventory("TossGrenade",1,"TossGrenade")
		Loop
	Deselect:
		PUNG A 1 A_Lower	
		Loop
	Select:
		PUNG A 1 A_Raise
		Loop
	Fire:
		PUNG B 2 A_JumpIfInventory("PowerStrength",1,"PowerPunch")
		PUNG B 2
		PUNG C 1 A_CustomPunch(random(4,16),0,CPF_NORANDOMPUFFZ,"FistPuff")
		PUNG C 3
		PUNG D 5
		PUNG C 4
		PUNG B 5 A_ReFire
		Goto Ready
	PowerPunch:
		PUNG B 2
		PUNG B 2
		PUNG C 1 A_CustomPunch(10 * random(4,16),0,CPF_NORANDOMPUFFZ,"FistPuff")
		PUNG C 3
		PUNG D 5
		PUNG C 4
		PUNG B 5 A_ReFire
		Goto Ready
	TossGrenade:	
		TNT1 A 0
		TNT1 A 0 A_ZoomFactor(1.0)
		TNT1 A 0 A_TakeInventory("TossGrenade", 1)
		TNT1 A 0 A_JumpIfInventory("GrenadeAmmo", 1, 1)
		Goto NoGrenade
		HNDG ABCD 1
		TNT1 A 0 A_GiveInventory("FiredGrenade", 1)
		TNT1 A 0 A_Playsound ("GRNPIN")
		HNDG EEFG 1
		TNT1 A 0 A_Playsound ("GRNTOSS")
		HNDG HI 1
		TNT1 A 0 A_TakeInventory("GrenadeAmmo", 1)
		TNT1 A 0 A_FireCustomMissile("HandGrenade", frandom(-2,2), 0, 0, 0, 0, 0)
		TNT1 A 0 A_TakeInventory("FiredGrenade", 1)
		HNDG JKLM 1
		TNT1 A 1 
		TNT1 A 0 A_TakeInventory("TossGrenade", 1)
		Goto Ready	
	NoGrenade:
		TNT1 A 0
		TNT1 A 0 A_Print("No Grenades Left")
		Goto Ready	
	}
}

ACTOR FistPuff
{
	+NOBLOCKMAP
	+NOEXTREMEDEATH
	+NOGRAVITY
	+PUFFONACTORS
	+PUFFGETSOWNER
	RenderStyle "Add"
	States
	{
	Spawn:
	Melee:
		POOF A 0
	Crash:
		POOF ABCDE 3
		Stop
	}
}

ACTOR --------CHAINSAW------------ {}
ACTOR Chainsaw_ : DoomW replaces Chainsaw
{
	//$Sprite CSAWA0
	Weapon.Kickback 0
	Weapon.SelectionOrder 2200
	Weapon.UpSound "weapons/sawup"
	Weapon.ReadySound "weapons/sawidle"
	Inventory.PickupMessage "$GOTCHAINSAW"
	Obituary "$OB_MPCHAINSAW"
	Tag "$TAG_CHAINSAW"
	+WEAPON.MELEEWEAPON
	States
	{
	Spawn:
		TNT1 A 0 NODELAY A_JumpIf(CallACS("blm_voxmod")==1,"ModelSpawn")
	BaseSpawn:
		CSAW A 1  
		CSAW A -1 A_SpawnItemEx("Flaregun",0,0,0)
		Stop
	ModelSpawn:
		UNKN A 1
		UNKN A -1 A_SpawnItemEx("Flaregun",0,0,0)
		Stop
	Ready:
		SAWG CD 4 A_WeaponReady
		Loop
	Deselect:
		SAWG C 1 A_Lower
		Loop
	Select:
		SAWG C 1 A_Raise
		Loop
	Fire:
		SAWG AB 4 A_Saw
		SAWG B 0 A_Refire
		Goto Ready
	TossGrenade:	
		TNT1 A 0
		TNT1 A 0 A_ZoomFactor(1.0)
		TNT1 A 0 A_TakeInventory("TossGrenade", 1)
		TNT1 A 0 A_JumpIfInventory("GrenadeAmmo", 1, 1)
		Goto NoGrenade
		HNDG ABCD 1
		TNT1 A 0 A_GiveInventory("FiredGrenade", 1)
		TNT1 A 0 A_Playsound ("GRNPIN")
		HNDG EEFG 1
		TNT1 A 0 A_Playsound ("GRNTOSS")
		HNDG HI 1
		TNT1 A 0 A_TakeInventory("GrenadeAmmo", 1)
		TNT1 A 0 A_FireCustomMissile("HandGrenade", frandom(-2,2), 0, 0, 0, 0, 0)
		TNT1 A 0 A_TakeInventory("FiredGrenade", 1)
		HNDG JKLM 1
		TNT1 A 1 
		TNT1 A 0 A_TakeInventory("TossGrenade", 1)
		Goto Ready	
	NoGrenade:
		TNT1 A 0
		TNT1 A 0 A_Print("No Grenades Left")
		Goto Ready	
	}
}

ACTOR --------PISTOL------------ {}
ACTOR Pistol_ : DoomW replaces Pistol //3d model not present yet - ozy81
{
	//$Sprite PISTA0
	Decal ZBloodBulletChip1  
	Weapon.SelectionOrder 1900
	Weapon.AmmoUse 1
	Weapon.AmmoGive 20
	Weapon.AmmoType "Clip"
	Obituary "$OB_MPPISTOL"
	Inventory.Pickupmessage "$PICKUP_PISTOL_DROPPED"
	Tag "$TAG_PISTOL"
	+WEAPON.WIMPY_WEAPON
	States
	{
	Spawn:
		TNT1 A 0 NODELAY A_JumpIf(CallACS("blm_voxmod")==1,"ModelSpawn")
	BaseSpawn:
		PIST A -1
		Stop
	ModelSpawn:
		UNKN A -1 //no replacement for Caleb - ozy81
		Stop
	Ready:
		TNT1 A 0 A_JumpIfInventory("TossGrenade",1,"TossGrenade")
		PKPI A 1 A_WeaponReady
		Loop
	Deselect:
		PKPI A 1 A_Lower
		Loop
	Select:
		PKPI A 1 A_Raise
		Loop
	Fire:
		PKPI A 4 
		PKPI B 0 A_FirePistol 
		PKPI B 2
		PKPI C 3
		PKPI D 1
		PKPI E 1 Offset(0,34)
		PKPI E 1 Offset(0,33)
		PKPI D 1 Offset(0,32)
		PKPI B 1 Offset(0,32)
		PKPI B 1 A_Refire
		PKPI A 4 A_Refire
		Goto Ready
	Flash:
		TNT1 A 0
		PKPF B 2 BRIGHT A_Light2
		PKPF A 1 BRIGHT A_Light1
		Goto LightDone
	TossGrenade:	
		TNT1 A 0
		TNT1 A 0 A_ZoomFactor(1.0)
		TNT1 A 0 A_TakeInventory("TossGrenade", 1)
		TNT1 A 0 A_JumpIfInventory("GrenadeAmmo", 1, 1)
		Goto NoGrenade
		HNDG ABCD 1
		TNT1 A 0 A_GiveInventory("FiredGrenade", 1)
		TNT1 A 0 A_Playsound ("GRNPIN")
		HNDG EEFG 1
		TNT1 A 0 A_Playsound ("GRNTOSS")
		HNDG HI 1
		TNT1 A 0 A_TakeInventory("GrenadeAmmo", 1)
		TNT1 A 0 A_FireCustomMissile("HandGrenade", frandom(-2,2), 0, 0, 0, 0, 0)
		TNT1 A 0 A_TakeInventory("FiredGrenade", 1)
		HNDG JKLM 1
		TNT1 A 1 
		TNT1 A 0 A_TakeInventory("TossGrenade", 1)
		Goto Ready	
	NoGrenade:
		TNT1 A 0
		TNT1 A 0 A_Print("No Grenades Left")
		Goto Ready	
	}
}

ACTOR --------SHOTGUN------------ {}
ACTOR Shotgun_ : DoomW replaces Shotgun
{
	//$Sprite SHOTA0
	Decal ZBloodBulletChip1  
	Weapon.SelectionOrder 1300
	Weapon.AmmoUse 1
	Weapon.AmmoGive 8
	Weapon.AmmoType "Shell"
	Inventory.PickupMessage "$GOTSHOTGUN"
	Obituary "$OB_MPSHOTGUN"
	Tag "$TAG_SHOTGUN"
	States
	{
	Spawn:
		TNT1 A 0 NODELAY A_JumpIf(CallACS("blm_voxmod")==1,"ModelSpawn")
	BaseSpawn:
		SHOT A 1 
		SHOT A -1 A_SpawnItemEx("SingleShotgun",0,0,0)
		Stop
	ModelSpawn:
		UNKN A 1
		UNKN A -1 A_SpawnItemEx("SingleShotgun",0,0,0)
		Stop
	Ready:
		TNT1 A 0 A_JumpIfInventory("TossGrenade",1,"TossGrenade")
		PKSG A 1 A_WeaponReady
		Loop
	Deselect:
		PKSG A 1 A_Lower
		Loop
	Select:
		PKSG A 1 A_Raise
		Loop
	Fire:
		PKSG A 3
		PKSG A 5 A_FireShotgun
		TNT1 A 0 A_Quake(2,6,0,100)  	
		PKSG B 2
		PKSG C 1
		PKSG D 2
		PKSG E 3
		PKSG F 4
		PKSG G 1
		PKSG H 3
		TNT1 A 0 A_FireCustomMissile("ShotgunCasing",+45+frandom(-8,8),0,1,1+frandom(-.1,.1),0)
		PKSG GFEDCB 2
		PKSG A 1
		PKSG A 7 A_Refire
		Goto Ready
	Flash:
		SHTF B 3 BRIGHT A_Light2
		SHTF A 2 BRIGHT A_Light1
		Goto LightDone
	TossGrenade:	
		TNT1 A 0
		TNT1 A 0 A_ZoomFactor(1.0)
		TNT1 A 0 A_TakeInventory("TossGrenade", 1)
		TNT1 A 0 A_JumpIfInventory("GrenadeAmmo", 1, 1)
		Goto NoGrenade
		HNDG ABCD 1
		TNT1 A 0 A_GiveInventory("FiredGrenade", 1)
		TNT1 A 0 A_Playsound ("GRNPIN")
		HNDG EEFG 1
		TNT1 A 0 A_Playsound ("GRNTOSS")
		HNDG HI 1
		TNT1 A 0 A_TakeInventory("GrenadeAmmo", 1)
		TNT1 A 0 A_FireCustomMissile("HandGrenade", frandom(-2,2), 0, 0, 0, 0, 0)
		TNT1 A 0 A_TakeInventory("FiredGrenade", 1)
		HNDG JKLM 1
		TNT1 A 1 
		TNT1 A 0 A_TakeInventory("TossGrenade", 1)
		Goto Ready	
	NoGrenade:
		TNT1 A 0
		TNT1 A 0 A_Print("No Grenades Left")
		Goto Ready	
	}
}

ACTOR --------SUPERSHOTGUN------------ {}
ACTOR SuperShotgun_ : DoomW replaces SuperShotgun
{
	//$Sprite SGN2A0
	Decal ZBloodBulletChip1  
	Weapon.SelectionOrder 400
	Weapon.AmmoUse 2
	Weapon.AmmoGive 8
	Weapon.AmmoType "Shell"
	Inventory.PickupMessage "$GOTSHOTGUN2"
	Obituary "$OB_MPSSHOTGUN"
	Tag "$TAG_SUPERSHOTGUN"
	States
	{
	Spawn:
		TNT1 A 0 NODELAY A_JumpIf(CallACS("blm_voxmod")==1,"ModelSpawn")
	BaseSpawn:
		SGN2 A 1 
		SGN2 A -1 A_SpawnItemEx("Sawedoff",0,0,0)  
		Stop
	ModelSpawn:
		UNKN A 1
		UNKN A -1 A_SpawnItemEx("Sawedoff",0,0,0)
		Stop
	Ready:
		TNT1 A 0 A_JumpIfInventory("TossGrenade",1,"TossGrenade")
		PKS2 A 1 A_WeaponReady
		Loop
	Deselect:
		PKS2 A 1 A_Lower
		Loop
	Select:
		PKS2 A 1 A_Raise
		Loop
	Fire:
		PKS2 A 3
		PKS2 A 0 A_Playsound ("weapons/sshotf", CHAN_WEAPON)
		PKS2 A 0 A_FireShotgun2
		PKS2 A 0 A_Quake(2,6,0,100)  
		PKS2 A 6 A_gunflash
		PKS2 A 3 A_Checkreload
		PKS2 B 2
		PKS2 C 3
		PKS2 D 4
		PKS2 E 4
		PKS2 F 2 A_OpenShotgun2
		TNT1 AA 0 A_FireCustomMissile("ShotgunCasing",+45+frandom(-8,8),0,1,3+frandom(-2,2),0)	
		PKS2 GHIJ 2
		PKS2 K 3
		PKS2 L 2 A_LoadShotgun2
		PKS2 M 3 
		PKS2 NOPQ 2 
		PKS2 R 3 A_CloseShotgun2
		PKS2 S 3
		PKS2 A 1 A_Refire
		Goto Ready
	Flash:
		SHT2 J 3 BRIGHT A_Light2
		SHT2 I 2 BRIGHT A_Light1
		Goto LightDone
	TossGrenade:	
		TNT1 A 0
		TNT1 A 0 A_ZoomFactor(1.0)
		TNT1 A 0 A_TakeInventory("TossGrenade", 1)
		TNT1 A 0 A_JumpIfInventory("GrenadeAmmo", 1, 1)
		Goto NoGrenade
		HNDG ABCD 1
		TNT1 A 0 A_GiveInventory("FiredGrenade", 1)
		TNT1 A 0 A_Playsound ("GRNPIN")
		HNDG EEFG 1
		TNT1 A 0 A_Playsound ("GRNTOSS")
		HNDG HI 1
		TNT1 A 0 A_TakeInventory("GrenadeAmmo", 1)
		TNT1 A 0 A_FireCustomMissile("HandGrenade", frandom(-2,2), 0, 0, 0, 0, 0)
		TNT1 A 0 A_TakeInventory("FiredGrenade", 1)
		HNDG JKLM 1
		TNT1 A 1 
		TNT1 A 0 A_TakeInventory("TossGrenade", 1)
		Goto Ready	
	NoGrenade:
		TNT1 A 0
		TNT1 A 0 A_Print("No Grenades Left")
		Goto Ready	
	}
}

ACTOR --------CHAINGUN------------ {}
ACTOR Chaingun_ : DoomW replaces Chaingun
{
	//$Sprite MGUNA0
	Decal ZBloodBulletChip1  
	Weapon.SelectionOrder 700
	Weapon.AmmoUse 1
	Weapon.AmmoGive 20
	Weapon.AmmoType "Clip"
	Inventory.PickupMessage "$GOTCHAINGUN" // "You got the chaingun"
	Obituary "$OB_MPCHAINGUN" // "%o was mowed down by %k's chaingun."
	Tag "$TAG_CHAINGUN"
	States
	{
	Spawn:
		TNT1 A 0 NODELAY A_JumpIf(CallACS("blm_voxmod")==1,"ModelSpawn")
	BaseSpawn:
		MGUN A 1 
		MGUN A -1 A_SpawnItemEx("Tommygun",0,0,0)    
		Stop
	ModelSpawn:
		UNKN A 1
		UNKN A -1 A_SpawnItemEx("Tommygun",0,0,0)
		Stop
	Ready:
		TNT1 A 0 A_JumpIfInventory("TossGrenade",1,"TossGrenade")
		PKCG A 1 A_WeaponReady
		Loop
	Deselect:
		PKCG A 1 A_Lower
		Loop
	Select:
		PKCG A 1 A_Raise
		Loop
	Fire:
		PKCG A 0 A_Playsound("weapons/chngun", CHAN_WEAPON)
		PKCG A 0 A_GunFlash
		PKCG A 1 A_FireBullets(5.6, 0, 1, 5, "BulletPuff")
		TNT1 A 0 A_Quake(2,6,0,random(50,75))
		TNT1 A 0 A_FireCustomMissile("TommygunCasing",45+frandom(-8,8),0,1,8,0)	 		 	 	 
		PKCG B 0 A_Playsound("weapons/chngun", CHAN_WEAPON)
		PKCG B 0 A_GunFlash("Flash2")
		PKCG B 1 A_FireBullets(5.6, 0, 1, 5, "BulletPuff")
		TNT1 A 0 A_Quake(2,6,0,random(50,75))					   	 
		TNT1 A 0 A_FireCustomMissile("TommygunCasing",45+frandom(-8,8),0,1,8,0)	 		 	 	 
		PKCG C 0 A_Playsound("weapons/chngun", CHAN_WEAPON)
		PKCG C 0 A_GunFlash("Flash3")
		PKCG C 1 A_FireBullets(5.6, 0, 1, 5, "BulletPuff")
		TNT1 A 0 A_Quake(2,6,0,random(50,75))					   	 
		TNT1 A 0 A_FireCustomMissile("TommygunCasing",45+frandom(-8,8),0,1,8,0)	 		 	 	 
		PKCG D 0 A_Playsound("weapons/chngun", CHAN_WEAPON)
		PKCG D 0 A_GunFlash("Flash4")
		PKCG D 1 A_FireBullets(5.6, 0, 1, 5, "BulletPuff")	 
		TNT1 A 0 A_Quake(2,6,0,random(50,75))					   	 
		TNT1 A 0 A_FireCustomMissile("TommygunCasing",45+frandom(-8,8),0,1,8,0)	 		 	 	 
		PKCG B 0 A_Refire
		PKCG A 2 //Stop fire
		PKCG B 2
		PKCG C 2
		PKCG D 2
		PKCG A 2
		PKCG B 3
		PKCG C 3
		PKCG D 3	 
		Goto Ready	 
	Flash:
		PKCF A 2 BRIGHT A_Light1
		Goto LightDone
	Flash2:
		PKCF B 2 BRIGHT A_Light2
		Goto LightDone
	Flash3:
		PKCF C 2 BRIGHT A_Light1
		Goto LightDone
	Flash4:
		PKCF D 2 BRIGHT A_Light2
		Goto LightDone
	TossGrenade:	
		TNT1 A 0
		TNT1 A 0 A_ZoomFactor(1.0)
		TNT1 A 0 A_TakeInventory("TossGrenade", 1)
		TNT1 A 0 A_JumpIfInventory("GrenadeAmmo", 1, 1)
		Goto NoGrenade
		HNDG ABCD 1
		TNT1 A 0 A_GiveInventory("FiredGrenade", 1)
		TNT1 A 0 A_Playsound ("GRNPIN")
		HNDG EEFG 1
		TNT1 A 0 A_Playsound ("GRNTOSS")
		HNDG HI 1
		TNT1 A 0 A_TakeInventory("GrenadeAmmo", 1)
		TNT1 A 0 A_FireCustomMissile("HandGrenade", frandom(-2,2), 0, 0, 0, 0, 0)
		TNT1 A 0 A_TakeInventory("FiredGrenade", 1)
		HNDG JKLM 1
		TNT1 A 1 
		TNT1 A 0 A_TakeInventory("TossGrenade", 1)
		Goto Ready	
	NoGrenade:
		TNT1 A 0
		TNT1 A 0 A_Print("No Grenades Left")
		Goto Ready	
	}
}

ACTOR --------ROCKETLAUNCHER------------ {}
ACTOR RocketLauncher_ : DoomW replaces RocketLauncher
{
	//$Sprite LAUNA0
	Weapon.SelectionOrder 2500
	Weapon.AmmoUse 1
	Weapon.AmmoGive 2
	Weapon.AmmoType "RocketAmmo"
	+WEAPON.NOAUTOFIRE
	Inventory.PickupMessage "$GOTLAUNCHER"
	Tag "$TAG_ROCKETLAUNCHER"
	States
	{
	Spawn:
		TNT1 A 0 NODELAY A_JumpIf(CallACS("blm_voxmod")==1,"ModelSpawn")
	BaseSpawn:
		LAUN A 1 
		LAUN A -1 A_SpawnItemEx("NapalmLauncher",0,0,0) 
		Stop
	ModelSpawn:
		UNKN A 1
		UNKN A -1 A_SpawnItemEx("NapalmLauncher",0,0,0)
		Stop
	Ready:
		TNT1 A 0 A_JumpIfInventory("TossGrenade",1,"TossGrenade")
		MISG A 1 A_WeaponReady
		Loop
	Deselect:
		MISG A 1 A_Lower
		Loop
	Select:
		MISG A 1 A_Raise
		Loop
	Fire:
		PKRL A 2 
		PKRL A 4 A_GunFlash
		PKRL B 2
		PKRL D 3 A_FireMissile
		PKRL C 3
		PKRL BE 2
		PKRL FG 1
		PKRL A 0 A_Refire
		Goto Ready
	Flash:
		PKRF A 3 BRIGHT A_Light1
		PKRF B 2 BRIGHT
		PKRF C 2 BRIGHT A_Light2
		PKRF DE 3 BRIGHT
		Goto LightDone
	TossGrenade:	
		TNT1 A 0
		TNT1 A 0 A_ZoomFactor(1.0)
		TNT1 A 0 A_TakeInventory("TossGrenade", 1)
		TNT1 A 0 A_JumpIfInventory("GrenadeAmmo", 1, 1)
		Goto NoGrenade
		HNDG ABCD 1
		TNT1 A 0 A_GiveInventory("FiredGrenade", 1)
		TNT1 A 0 A_Playsound ("GRNPIN")
		HNDG EEFG 1
		TNT1 A 0 A_Playsound ("GRNTOSS")
		HNDG HI 1
		TNT1 A 0 A_TakeInventory("GrenadeAmmo", 1)
		TNT1 A 0 A_FireCustomMissile("HandGrenade", frandom(-2,2), 0, 0, 0, 0, 0)
		TNT1 A 0 A_TakeInventory("FiredGrenade", 1)
		HNDG JKLM 1
		TNT1 A 1 
		TNT1 A 0 A_TakeInventory("TossGrenade", 1)
		Goto Ready	
	NoGrenade:
		TNT1 A 0
		TNT1 A 0 A_Print("No Grenades Left")
		Goto Ready	
	}
}

ACTOR --------PLASMARIFLE------------ {}
ACTOR PlasmaRifle_ : DoomW replaces PlasmaRifle
{
	//$Sprite PLASA0
	Weapon.SelectionOrder 100
	Weapon.AmmoUse 1
	Weapon.AmmoGive 40
	Weapon.AmmoType "Cell"
	Inventory.PickupMessage "$GOTPLASMA"
	Tag "$TAG_PLASMARIFLE"
	States
	{
	Spawn:
		TNT1 A 0 NODELAY A_JumpIf(CallACS("blm_voxmod")==1,"ModelSpawn")
	BaseSpawn:
		PLAS A 1 
		PLAS A -1 A_SpawnItemEx("TeslaRifle",0,0,0) 	
		Stop
	ModelSpawn:
		UNKN A 1
		UNKN A -1 A_SpawnItemEx("TeslaRifle",0,0,0)
		Stop
	Ready:
		TNT1 A 0 A_JumpIfInventory("TossGrenade",1,"TossGrenade")
		PKPL A 1 A_WeaponReady
		Loop
	Deselect:
		PKPL A 1 A_Lower
		Loop
	Select:
		PKPL A 1 A_Raise
		Loop  
	Fire:
		PLSF C 1 BRIGHT A_FirePlasma
		TNT1 A 0 A_Quake(2,6,0,75)							
		PLSF D 1 BRIGHT
		PLSF E 1 BRIGHT
		PLSF F 0 BRIGHT
		TNT1 A 0 A_Refire
		PKPL A 1 BRIGHT
		PKPL BBC 1
		PKPL CDE 1
		PKPL E 6
		PKPL EEDC 2
		PKPL BA 1
		Goto Ready
	Flash:
		TNT1 A 4 BRIGHT A_Light1
		Goto LightDone
		TNT1 A 4 BRIGHT A_Light1
		Goto LightDone
	TossGrenade:	
		TNT1 A 0
		TNT1 A 0 A_ZoomFactor(1.0)
		TNT1 A 0 A_TakeInventory("TossGrenade", 1)
		TNT1 A 0 A_JumpIfInventory("GrenadeAmmo", 1, 1)
		Goto NoGrenade
		HNDG ABCD 1
		TNT1 A 0 A_GiveInventory("FiredGrenade", 1)
		TNT1 A 0 A_Playsound ("GRNPIN")
		HNDG EEFG 1
		TNT1 A 0 A_Playsound ("GRNTOSS")
		HNDG HI 1
		TNT1 A 0 A_TakeInventory("GrenadeAmmo", 1)
		TNT1 A 0 A_FireCustomMissile("HandGrenade", frandom(-2,2), 0, 0, 0, 0, 0)
		TNT1 A 0 A_TakeInventory("FiredGrenade", 1)
		HNDG JKLM 1
		TNT1 A 1 
		TNT1 A 0 A_TakeInventory("TossGrenade", 1)
		Goto Ready	
	NoGrenade:
		TNT1 A 0
		TNT1 A 0 A_Print("No Grenades Left")
		Goto Ready	
	}
}

ACTOR --------BFG9000------------ {}
ACTOR BFG9000_ : DoomW replaces BFG9000
{
	//$Sprite BFUGA0
	Height 20
	Weapon.SelectionOrder 2800
	Weapon.AmmoUse 40
	Weapon.AmmoGive 40
	Weapon.AmmoType "Cell"
	+WEAPON.NOAUTOFIRE
	+WEAPON.ALT_USES_BOTH
	Inventory.PickupMessage "$GOTBFG9000"
	Tag "$TAG_BFG9000"
	States
	{
	Spawn:
		TNT1 A 0 NODELAY A_JumpIf(CallACS("blm_voxmod")==1,"ModelSpawn")
	BaseSpawn:
		BFUG A 1 
		BFUG A -1 A_SpawnItemEx("BloomUltimateWeapons",0,0,0)  
		Stop
	ModelSpawn:
		UNKN A 1
		UNKN A -1 A_SpawnItemEx("BloomUltimateWeapons",0,0,0)
		Stop
	Ready:
		TNT1 A 0 A_JumpIfInventory("TossGrenade",1,"TossGrenade")
		BFGG A 1 A_WeaponReady
		Loop
	Deselect:
		BFGG A 1 A_Lower
		Loop
	Select:
		BFGG A 1 A_Raise
		Loop
	Fire:
		BFGG A 20 A_BFGSound
		BFGG A 2 A_GunFlash
		BFGN A 8
		SBFG D 2 A_FireBFG
		SBFG E 2
		SBFG D 2
		SBFG C 2
		SBFG B 1
		SBFG A 1
		BFGG A 20 A_Refire
		Goto Ready
	Flash:
		BFGW A 2 BRIGHT
		BFGX HGFE 1 BRIGHT A_Light2
		BFGX DCBA 1 BRIGHT A_Light2
		TNT1 A 0 A_Light0
		Goto LightDone
	Altfire:
		BFGG A 10 A_BFGSound
		BFGG BBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB 1 A_FireOldBFG
		BFGG B 0 A_Light0
		BFGG B 20 A_Refire
		Goto Ready
	TossGrenade:	
		TNT1 A 0
		TNT1 A 0 A_ZoomFactor(1.0)
		TNT1 A 0 A_TakeInventory("TossGrenade", 1)
		TNT1 A 0 A_JumpIfInventory("GrenadeAmmo", 1, 1)
		Goto NoGrenade
		HNDG ABCD 1
		TNT1 A 0 A_GiveInventory("FiredGrenade", 1)
		TNT1 A 0 A_Playsound ("GRNPIN")
		HNDG EEFG 1
		TNT1 A 0 A_Playsound ("GRNTOSS")
		HNDG HI 1
		TNT1 A 0 A_TakeInventory("GrenadeAmmo", 1)
		TNT1 A 0 A_FireCustomMissile("HandGrenade", frandom(-2,2), 0, 0, 0, 0, 0)
		TNT1 A 0 A_TakeInventory("FiredGrenade", 1)
		HNDG JKLM 1
		TNT1 A 1 
		TNT1 A 0 A_TakeInventory("TossGrenade", 1)
		Goto Ready	
	NoGrenade:
		TNT1 A 0
		TNT1 A 0 A_Print("No Grenades Left")
		Goto Ready	
	}
}